AWSTemplateFormatVersion: '2010-09-09'
Description: 'Creates Cluster and NodeGroup'

apiVersion: eksctl.io/v1alpha5
kind: ClusterConfig
metadata:
  name: simplr-demo-cluster
  region: us-east-2
vpc:
  id: "vpc-08c54b71caa4efdc9"
  subnets:
    public:
      us-east-2c:
          id: "subnet-06e2e100ebfa9a574"
      us-east-2b:
          id: "subnet-0bbeda2c05f614427"
      us-east-2a:
          id: "subnet-0d291755f72dd5b83"
iam:
  serviceRoleARN: Fn::ImportValue: !Sub "${rolesinfra}-ClusterRoleARN"

nodeGroups:
  - name: simplr-demo-nodegroup
    instanceType: t2.micro
    desiredCapacity: 3
    privateNetworking: false
    securityGroups:
      attachIDs: ['sg-0144f9d6e9e718b50']
    iam:
      instanceProfileARN: Fn::ImportValue: !Sub "${rolesinfra}-InstanceProfileARN"
      instanceRoleARN: Fn::ImportValue: !Sub "${rolesinfra}-NodeGroupRoleARN"
      


    